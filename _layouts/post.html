---
layout: default
---

<article class="page-content">
  <header class="post-page-header" style="text-align: left !important; margin-bottom: 30px;">
    <h1 class="post-title" style="font-size: 28px; font-weight: bold; margin: 0; border: none; text-indent: 0 !important;">
      {{ page.title }}
    </h1>

    <div class="post-meta" style="margin-top: 15px; font-size: 14px; color: #999; text-indent: 0 !important;">
      {% assign word_count = page.content | strip_html | strip_newlines | size %}
      {% assign read_time = word_count | divided_by: 300 | plus: 1 %}
      <span>约 {{ word_count }} 字</span>
      <span style="margin: 0 10px;">·</span>
      <span>预计阅读 {{ read_time }} 分钟</span>
    </div>
  </header>

  <div class="inner-post-content">
    {{ content }}
  </div>

  <div class="post-date-bottom" style="margin-top: 40px; font-size: 14px; color: #999; text-align: left !important; text-indent: 0 !important;">
    编辑于 {{ page.date | date: "%Y/%m/%d" }}
  </div>

  <footer style="margin-top: 20px; padding-top: 20px; padding-bottom: 80px; border-top: 1px solid rgba(0,0,0,0.05); display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; width: 100%; margin-left: 0 !important; margin-right: 0 !important; padding-left: 0 !important; padding-right: 0 !important;">
    
    <div style="font-size: 13px; color: #bbb; text-indent: 0 !important; margin-bottom: 20px;">
      {% if page.categories contains 'photo' %}
        <a href="{{ site.baseurl }}/category/photos/" style="color: #bbb; text-decoration: none;">返回目录</a>
      {% elsif page.categories.size > 0 %}
        <a href="{{ site.baseurl }}/category/{{ page.categories | first }}/" style="color: #bbb; text-decoration: none;">返回目录</a>
      {% endif %}
      <span style="margin: 0 10px;">|</span>
      <a href="{{ site.baseurl }}/" style="color: #bbb; text-decoration: none;">返回主页</a>
    </div>

    <div style="font-size: 13px; color: #bbb; text-align: right; margin-bottom: 20px;">
      {% assign prev_post = nil %}
      {% assign next_post = nil %}
      {% assign current_cat = page.categories | first %}
      {% if current_cat %}
        {% assign cat_posts = site.categories[current_cat] %}
        {% for p in cat_posts %}
          {% if p.url == page.url %}
            {% assign p_idx = forloop.index0 | plus: 1 %}
            {% assign n_idx = forloop.index0 | minus: 1 %}
            {% if p_idx < cat_posts.size %}{% assign prev_post = cat_posts[p_idx] %}{% endif %}
            {% if n_idx >= 0 %}{% assign next_post = cat_posts[n_idx] %}{% endif %}
            {% break %}
          {% endif %}
        {% endfor %}
      {% endif %}
      {% if prev_post %}<a href="{{ prev_post.url | relative_url }}" style="color: #bbb; text-decoration: none;">上一篇</a>{% endif %}
      {% if prev_post and next_post %}<span style="margin: 0 10px;">|</span>{% endif %}
      {% if next_post %}<a href="{{ next_post.url | relative_url }}" style="color: #bbb; text-decoration: none;">下一篇</a>{% endif %}
    </div>

<div id="artalk-area" style="width: 100%; margin-top: 30px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 30px;">

  <link href="https://respectable-waly-puppyhat-93540749.koyeb.app/dist/Artalk.css" rel="stylesheet" />
  <script src="https://respectable-waly-puppyhat-93540749.koyeb.app/dist/Artalk.js"></script>

  <div id="Comments"></div>

  <script>
    (function() {
      function injectArtalkStyle() {
        var id = 'atk-style-override-v3';
        var old = document.getElementById(id);
        if (old) old.remove();

        var style = document.createElement('style');
        style.id = id;
        style.type = 'text/css';
        style.appendChild(document.createTextNode(`
          /* ===== 全域只命中 Artalk 的 class，避免 #Comments 选择器失效 ===== */

          /* 字体继承 */
          :root { --at-font-family: inherit !important; }
          .atk-root, .atk-root * , .atk-layer, .atk-layer * {
            font-family: inherit !important;
          }

          /* 仅隐藏网址与表情（邮箱保留） */
          .atk-item input[type="url"],
          .atk-item[data-field="link"],
          .atk-grp[data-grp="emoticons"] {
            display: none !important;
          }

          /* 字号：输入区+显示区整体缩小 */
          .atk-root,
          .atk-root .atk-content,
          .atk-root .atk-comment,
          .atk-root .atk-editor,
          .atk-root .atk-main-editor,
          .atk-root textarea,
          .atk-root input,
          .atk-root button,
          .atk-layer,
          .atk-layer textarea,
          .atk-layer input,
          .atk-layer button {
            font-size: 13px !important;
            line-height: 1.55 !important;
          }

          /* 浅色模式：全局文字颜色（避免浅色模式“字消失”） */
          .atk-root,
          .atk-root .atk-content,
          .atk-root .atk-comment,
          .atk-root .atk-item,
          .atk-root .atk-nick,
          .atk-root .atk-time,
          .atk-root .atk-meta,
          .atk-root .atk-btn,
          .atk-root a {
            color: #2c2c2c !important;
          }
          .atk-root .atk-meta,
          .atk-root .atk-time,
          .atk-root .atk-count,
          .atk-root .atk-footer,
          .atk-root .atk-hint {
            color: rgba(44,44,44,0.55) !important;
          }

          /* 深色模式：全局文字颜色 */
          .atk-dark-mode .atk-root,
          .atk-dark-mode .atk-root .atk-content,
          .atk-dark-mode .atk-root .atk-comment,
          .atk-dark-mode .atk-root .atk-item,
          .atk-dark-mode .atk-root .atk-nick,
          .atk-dark-mode .atk-root .atk-time,
          .atk-dark-mode .atk-root .atk-meta,
          .atk-dark-mode .atk-root .atk-btn,
          .atk-dark-mode .atk-root a {
            color: #d6d6d6 !important;
          }
          .atk-dark-mode .atk-root .atk-meta,
          .atk-dark-mode .atk-root .atk-time,
          .atk-dark-mode .atk-root .atk-count,
          .atk-dark-mode .atk-root .atk-footer,
          .atk-dark-mode .atk-root .atk-hint {
            color: rgba(214,214,214,0.60) !important;
          }

          /* 输入框背景：命中包裹层 + textarea 本体 */
          .atk-root .atk-main-editor,
          .atk-root .atk-textarea-wrap {
            background-color: rgba(245,245,240,0.92) !important;
            border: 1px solid rgba(0,0,0,0.10) !important;
            border-radius: 10px !important;
          }
          .atk-root textarea.atk-textarea,
          .atk-root .atk-textarea {
            background-color: rgba(245,245,240,0.92) !important;
            color: #2c2c2c !important;
            border: none !important;
            box-shadow: none !important;
            outline: none !important;
          }

          /* 深色模式输入框背景 */
          .atk-dark-mode .atk-root .atk-main-editor,
          .atk-dark-mode .atk-root .atk-textarea-wrap {
            background-color: rgba(20,20,20,0.92) !important;
            border: 1px solid rgba(255,255,255,0.14) !important;
          }
          .atk-dark-mode .atk-root textarea.atk-textarea,
          .atk-dark-mode .atk-root .atk-textarea {
            background-color: rgba(20,20,20,0.92) !important;
            color: #d6d6d6 !important;
          }

          /* placeholder 颜色 */
          .atk-root textarea::placeholder { color: rgba(44,44,44,0.45) !important; }
          .atk-dark-mode .atk-root textarea::placeholder { color: rgba(214,214,214,0.45) !important; }
        `));
        document.head.appendChild(style);
      }

      function initArtalk() {
        if (typeof Artalk === 'undefined') {
          setTimeout(initArtalk, 100);
          return;
        }

        Artalk.init({
          el:        '#Comments',
          pageKey:   location.pathname,
          pageTitle: document.title,
          server:    'https://respectable-waly-puppyhat-93540749.koyeb.app',
          site:      '小狗帽子和永恒泡芙',
          useBackendConf: false,
          locale:    'zh-CN',
          darkMode:  'auto',
          placeholder: '假如你想同我说些什么',
          sendBtn:      '发布',
          emoticons: false,
          imgUpload: false,
          preview:   false
        });

        /* 关键：初始化后注入；再延迟补一次，防止 Artalk 后渲染覆盖 */
        injectArtalkStyle();
        setTimeout(injectArtalkStyle, 300);
        setTimeout(injectArtalkStyle, 1200);
      }

      initArtalk();
    })();
  </script>
</div>
  </footer>
</article>
