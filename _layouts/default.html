<!DOCTYPE html>
<html>
  <head>
<title>
  {% if page.url == "/" or page.url == "/index.html" %}
    {{ site.name }}
  {% elsif page.url contains '/category/' %}
    {{ page.title | default: "分类" }} – {{ site.name }}
  {% elsif page.layout == "post" or page.categories.size > 0 %}
    {% assign cat_slug = page.categories | first %}
    {% assign cat_name = cat_slug %}
    {% if cat_slug == "balloon" %}{% assign cat_name = "气球悲歌" %}
    {% elsif cat_slug == "desiccant" %}{% assign cat_name = "蓝色干燥剂之死" %}
    {% elsif cat_slug == "something" %}{% assign cat_name = "琐" %}
    {% elsif cat_slug == "photos" %}{% assign cat_name = "照片" %}
    {% endif %}
    {{ page.title }} – {{ cat_name }}
  {% else %}
    {{ page.title }}
  {% endif %}
</title>

    {% include meta.html %}

    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/main.css" />
    <link rel="alternate" type="application/rss+xml" title="{{ site.name }} - {{ site.description | strip_newlines }}" href="{{ site.baseurl }}/feed.xml" />
  </head>

  <body class="{% if page.url == '/' %}home-page{% endif %}">
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead">
          
          <div class="site-info">
            <h1 class="site-name">
              <a href="{{ site.baseurl }}/">{{ site.name }}</a>
            </h1>
            <p class="site-description">{{ site.description | newline_to_br }}</p>
          </div>

          <nav>
            {% for link in site.navigation %}
              <a href="{{ site.baseurl }}{{ link.url }}">{{ link.name }}</a>
            {% endfor %}

            <a href="javascript:void(0);" id="theme-toggle" title="切换模式" class="theme-toggle-link">
              <img id="theme-icon-img" src="{{ site.baseurl }}/assets/images/moon.png" alt="切换模式" style="width: 18px; height: 18px; display: block; border: none;">
            </a>
          </nav>

        </header>
      </div>
    </div>

<div id="main" role="main" class="container">
      {{ content }}
      <div style="height: 80px; clear: both;"></div>
    </div>

   <div class="wrapper-footer" style="padding-bottom: 15px;">
  <div class="container">
    <footer class="footer">
      {% include svg-icons.html %}
      
<div class="copyright">
  {% assign month = site.time | date: "%m" | plus: 0 %}
  
  {% comment %} 12个月令细分逻辑 {% endcomment %}
  {% if month == 3 %}{% assign season_tag = "春初" %}
  {% elsif month == 4 %}{% assign season_tag = "春盛" %}
  {% elsif month == 5 %}{% assign season_tag = "春暮" %}
  {% elsif month == 6 %}{% assign season_tag = "夏初" %}
  {% elsif month == 7 %}{% assign season_tag = "夏盛" %}
  {% elsif month == 8 %}{% assign season_tag = "夏暮" %}
  {% elsif month == 9 %}{% assign season_tag = "秋初" %}
  {% elsif month == 10 %}{% assign season_tag = "秋澄" %}
  {% elsif month == 11 %}{% assign season_tag = "秋深" %}
  {% elsif month == 12 %}{% assign season_tag = "冬初" %}
  {% elsif month == 1 %}{% assign season_tag = "冬深" %}
  {% else %}{% assign season_tag = "冬尽" %}
  {% endif %}

  © {{ site.name }} · {{ season_tag }} · 已有 {{ site.posts.size }} 条记录
</div>

    {% include analytics.html %}
    
    <script>
      const toggleBtn = document.getElementById('theme-toggle');
      const themeIconImg = document.getElementById('theme-icon-img');
      const htmlElement = document.documentElement;

      const savedTheme = localStorage.getItem('theme') || 'light';
      htmlElement.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);

      toggleBtn.addEventListener('click', () => {
        const currentTheme = htmlElement.getAttribute('data-theme');
        const targetTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        htmlElement.setAttribute('data-theme', targetTheme);
        localStorage.setItem('theme', targetTheme);
        updateThemeIcon(targetTheme);
      });

      function updateThemeIcon(theme) {
        if (themeIconImg) {
          const basePath = "{{ site.baseurl }}/assets/images/";
          if (theme === 'dark') {
            themeIconImg.src = basePath + "sun.png";
          } else {
            themeIconImg.src = basePath + "moon.png";
          }
        }
        
        const bannerImg = document.querySelector('.home-banner img, .full-width-banner img');
        if (bannerImg) {
          const src = bannerImg.src;
          if (theme === 'dark') {
            if (!src.includes('_dark')) {
              bannerImg.src = src.replace(/(\.jpg|\.png|\.jpeg)/, '_dark$1');
            }
          } else {
            bannerImg.src = src.replace('_dark', '');
          }
        }
      }
    </script>
  </body>
</html>
